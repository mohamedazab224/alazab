<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>إدارة عناوين URI لإعادة التوجيه</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Amiri', serif;
      background-color: #f9fafb;
    }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen">
  <div class="max-w-lg w-full p-6 bg-white rounded-lg shadow-md">
    <h1 class="text-2xl font-bold mb-4 text-gray-800 text-center">إدارة عناوين URI لإعادة التوجيه</h1>
    <div class="flex gap-2 mb-4">
      <input 
        type="text" 
        placeholder="أضف عنوان URI جديد" 
        id="newUriInput"
        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400"
      />
      <button 
        onclick="addUri()"
        class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400"
      >
        إضافة
      </button>
    </div>
    <div id="uriListContainer" class="bg-gray-100 p-4 rounded-md shadow-inner">
      <p id="emptyMessage" class="text-gray-500 text-center">لم يتم إضافة أي عناوين URI حتى الآن.</p>
      <ul id="uriList" class="space-y-2"></ul>
    </div>
  </div>

  <script>
    let uris = JSON.parse(localStorage.getItem("redirectURIs")) || [];

    // تحميل العناوين المحفوظة عند بداية الصفحة
    document.addEventListener("DOMContentLoaded", () => {
      updateURIList();
    });

    function addUri() {
      const newUriInput = document.getElementById("newUriInput");
      const newUri = newUriInput.value.trim();

      if (newUri === "") {
        alert("يرجى إدخال عنوان URI صالح");
        return;
      }

      uris.push(newUri);
      localStorage.setItem("redirectURIs", JSON.stringify(uris));
      newUriInput.value = "";
      updateURIList();
    }

    function deleteUri(index) {
      uris.splice(index, 1);
      localStorage.setItem("redirectURIs", JSON.stringify(uris));
      updateURIList();
    }

    function updateURIList() {
      const uriList = document.getElementById("uriList");
      const emptyMessage = document.getElementById("emptyMessage");
      uriList.innerHTML = "";

      if (uris.length === 0) {
        emptyMessage.style.display = "block";
      } else {
        emptyMessage.style.display = "none";
        uris.forEach((uri, index) => {
          const li = document.createElement("li");
          li.className = "flex justify-between items-center bg-white p-3 rounded-lg shadow";

          const span = document.createElement("span");
          span.textContent = uri;
          span.className = "text-gray-800";

          const deleteButton = document.createElement("button");
          deleteButton.textContent = "حذف";
          deleteButton.className = "bg-red-600 text-white px-3 py-1 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-400";
          deleteButton.onclick = () => deleteUri(index);

          li.appendChild(span);
          li.appendChild(deleteButton);
          uriList.appendChild(li);
        });
      }
    }
  </script>
</body>
</html>
